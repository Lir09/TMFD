<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>TMFD - 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .intro-section {
            position: relative;
            min-height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        .intro-bg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            background-image: url('assets/background.jpg');
            background-size: cover;
            background-position: center;
            filter: blur(4px) brightness(0.7); /* 블러를 8px → 4px로 연하게 */
            z-index: 1;
        }
        .intro-content {
            position: relative;
            z-index: 2;
        }
        .scroll-down-btn {
            background: rgba(0,0,0,0.3);
            border-radius: 9999px;
            padding: 0.5rem 1.5rem;
            color: #fff;
            font-weight: 600;
            margin-top: 2rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .scroll-down-btn:hover {
            background: rgba(30,64,175,0.7);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- 인트로/로고 섹션 (블러 배경, 로고/글자만 보임) -->
    <section class="intro-section flex flex-col items-center justify-center">
        <div class="intro-bg"></div>
        <div class="intro-content flex flex-col items-center justify-center min-h-screen">
            <img src="assets/logo.png" alt="TMFD 로고" class="w-36 h-36 mb-8 drop-shadow-lg" onerror="this.style.display='none'">
            <h1 class="text-7xl font-extrabold text-white mb-6 tracking-widest drop-shadow-2xl">TMFD</h1>
            <p class="text-2xl text-white mb-10 text-center drop-shadow-lg font-semibold">나만의 진로·학습·일정 관리 플랫폼</p>
            <button id="scroll-down" class="scroll-down-btn animate-bounce">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                </svg>
                아래로 이동
            </button>
        </div>
    </section>

    <!-- 대시보드/기능들 (여기부터는 배경 없음, 흰색 카드) -->
    <section id="dashboard" class="container mx-auto p-4 pt-12">
        <!-- 헤더/네비게이션 -->
        <header class="bg-white shadow-lg rounded-lg p-4 mb-4 flex justify-between items-center">
            <h2 class="text-2xl font-bold text-gray-800">대시보드</h2>
            <div class="flex items-center gap-4">
                <div id="user-info" class="text-blue-800 font-semibold"></div>
                <button id="login-btn" class="bg-gray-200 text-blue-800 px-4 py-2 rounded-md hover:bg-blue-100 transition-colors shadow">로그인</button>
                <button id="add-new-event-btn" class="bg-blue-800 text-white px-4 py-2 rounded-md hover:bg-blue-900 transition-colors shadow">새 일정 추가</button>
            </div>
        </header>

        <!-- 캘린더 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold mb-4 text-blue-700">캘린더</h3>
            <div id="calendar-view" class="overflow-x-auto"></div>
        </div>

        <!-- 나의 일정 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold mb-4 text-blue-700">나의 일정</h3>
            <div class="border-b border-gray-200 mb-4">
                <nav id="schedule-tabs" class="flex space-x-1" aria-label="Tabs">
                    <a href="#" data-period="today" class="schedule-tab text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">오늘</a>
                    <a href="#" data-period="this-week" class="schedule-tab bg-blue-800 text-white px-3 py-2 rounded-md text-sm font-medium">이번 주</a>
                    <a href="#" data-period="next-week" class="schedule-tab text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">다음 주</a>
                    <a href="#" data-period="this-month" class="schedule-tab text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">이번 달</a>
                </nav>
            </div>
            <div id="schedule-list" class="mt-4 space-y-2"></div>
        </div>

        <!-- 대회 정보 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h3 class="text-xl font-bold mb-4 text-blue-700">대회 정보</h3>
            <div class="border-b border-gray-200 mb-4">
                <nav id="contest-tabs" class="flex space-x-1" aria-label="Tabs">
                    <a href="#" data-type="school" class="contest-tab bg-blue-800 text-white px-3 py-2 rounded-md text-sm font-medium">교내대회</a>
                    <a href="#" data-type="outside" class="contest-tab text-gray-500 hover:text-gray-700 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">교외대회</a>
                </nav>
            </div>
            <div id="contest-list" class="mt-4 space-y-4"></div>
        </div>
    </section>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 인트로에서 아래로 이동 버튼
        document.getElementById('scroll-down').addEventListener('click', function() {
            document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
        });

        // 로그인 버튼
        const loginBtn = document.getElementById('login-btn');
        loginBtn.addEventListener('click', () => {
            window.location.href = 'login.html';
        });

        // 새 일정 추가 버튼 (예시)
        document.getElementById('add-new-event-btn').addEventListener('click', () => {
            alert('새 일정 추가 기능은 추후 구현됩니다.');
        });

        // 캘린더: 이번 달 달력 표시
        const calendarView = document.getElementById('calendar-view');
        function renderCalendar() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            let html = '<table class="w-full text-center table-fixed">';
            html += '<tr class="text-blue-700 font-semibold"><th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th></tr><tr>';

            // 빈칸
            for (let i = 0; i < firstDay; i++) html += '<td></td>';

            // 날짜
            for (let d = 1; d <= lastDate; d++) {
                const date = new Date(year, month, d);
                const isToday = date.toDateString() === today.toDateString();
                html += `<td class="${isToday ? 'bg-blue-100 font-bold rounded' : ''}">${d}</td>`;
                if ((firstDay + d) % 7 === 0) html += '</tr><tr>';
            }
            html += '</tr></table>';
            calendarView.innerHTML = html;
        }
        renderCalendar();

        // 일정 데이터 예시
        const allSchedules = {
            "2025-08-04": [{ title: "수학 숙제", desc: "문제집 3단원 풀기" }],
            "2025-08-05": [{ title: "영어 단어 암기", desc: "단어 20개 외우기" }]
        };
        const sortedDates = Object.keys(allSchedules).sort();
        const scheduleList = document.getElementById('schedule-list');

        function renderSchedule(period = 'this-week') {
            scheduleList.innerHTML = '';
            let filteredDates = [];
            const today = new Date();
            if (period === 'today') {
                filteredDates = sortedDates.filter(date => new Date(date).toDateString() === today.toDateString());
            } else if (period === 'this-week') {
                const dayOfWeek = today.getDay();
                const startOfWeek = new Date(today);
                startOfWeek.setDate(today.getDate() - dayOfWeek);
                const endOfWeek = new Date(startOfWeek);
                endOfWeek.setDate(startOfWeek.getDate() + 6);
                filteredDates = sortedDates.filter(date => {
                    const d = new Date(date);
                    return d >= startOfWeek && d <= endOfWeek;
                });
            } else if (period === 'next-week') {
                const startOfNextWeek = new Date(today);
                startOfNextWeek.setDate(today.getDate() - today.getDay() + 7);
                const endOfNextWeek = new Date(startOfNextWeek);
                endOfNextWeek.setDate(startOfNextWeek.getDate() + 6);
                filteredDates = sortedDates.filter(date => {
                    const d = new Date(date);
                    return d >= startOfNextWeek && d <= endOfNextWeek;
                });
            } else if (period === 'this-month') {
                filteredDates = sortedDates.filter(date => {
                    const d = new Date(date);
                    return d.getMonth() === today.getMonth() && d.getFullYear() === today.getFullYear();
                });
            }
            if (filteredDates.length === 0) {
                scheduleList.innerHTML = `<div class="schedule-item border-l-4 border-gray-300 pl-4 py-3"><p class="text-gray-500">선택한 기간에 일정이 없습니다.</p></div>`;
                return;
            }
            filteredDates.forEach(date => {
                allSchedules[date].forEach(item => {
                    scheduleList.insertAdjacentHTML('beforeend', `
                        <div class="schedule-item border-l-4 border-blue-400 pl-4 py-3">
                            <p class="font-semibold">${item.title}</p>
                            <p class="text-gray-600 text-sm">${item.desc}</p>
                            <p class="text-xs text-gray-400">${date}</p>
                        </div>
                    `);
                });
            });
        }

        // 일정 탭 이벤트
        const scheduleTabs = document.getElementById('schedule-tabs');
        scheduleTabs.addEventListener('click', (e) => {
            e.preventDefault();
            const targetTab = e.target.closest('.schedule-tab');
            if (!targetTab) return;
            scheduleTabs.querySelectorAll('.schedule-tab').forEach(tab => {
                tab.classList.remove('bg-blue-800', 'text-white');
                tab.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
            });
            targetTab.classList.add('bg-blue-800', 'text-white');
            targetTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
            renderSchedule(targetTab.dataset.period);
        });
        renderSchedule('this-week');

        // 대회 데이터 예시
        const schoolContests = [
            {
                title: "교내 과학탐구대회",
                img: "https://via.placeholder.com/80x80?text=대회1",
                link: "#"
            },
            {
                title: "교내 글쓰기 대회",
                img: "https://via.placeholder.com/80x80?text=대회2",
                link: "#"
            }
        ];
        const outsideContests = [
            {
                title: "전국 영어 토론대회",
                img: "https://via.placeholder.com/80x80?text=대회A",
                link: "#"
            },
            {
                title: "수학 창의력 경진대회",
                img: "https://via.placeholder.com/80x80?text=대회B",
                link: "#"
            }
        ];
        const contestTabs = document.getElementById('contest-tabs');
        const contestList = document.getElementById('contest-list');
        function renderContestList(type = 'school') {
            contestList.innerHTML = '';
            const data = type === 'school' ? schoolContests : outsideContests;
            if (data.length === 0) {
                contestList.innerHTML = `<div class="text-gray-500">등록된 대회가 없습니다.</div>`;
                return;
            }
            data.forEach(contest => {
                contestList.insertAdjacentHTML('beforeend', `
                    <div class="flex items-center gap-4">
                        <img src="${contest.img}" alt="${contest.title}" class="w-20 h-20 rounded-md border">
                        <div>
                            <p class="font-semibold">${contest.title}</p>
                            <a href="${contest.link}" target="_blank" class="text-blue-700 underline text-sm">자세히 보기</a>
                        </div>
                    </div>
                `);
            });
        }
        contestTabs.addEventListener('click', (e) => {
            e.preventDefault();
            const targetTab = e.target.closest('.contest-tab');
            if (!targetTab) return;
            contestTabs.querySelectorAll('.contest-tab').forEach(tab => {
                tab.classList.remove('bg-blue-800', 'text-white');
                tab.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
            });
            targetTab.classList.add('bg-blue-800', 'text-white');
            targetTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
            renderContestList(targetTab.dataset.type);
        });
        renderContestList('school');
    });
    </script>
</body>
</html>